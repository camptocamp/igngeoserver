<?xml version="1.0" encoding="UTF-8"?>
<as:AppSchemaDataAccess xmlns:as="http://www.geotools.org/app-schema"
    xmlns:ogc="http://www.opengis.net/ogc" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.geotools.org/app-schema AppSchemaDataAccess.xsd">
    <namespaces>
        <Namespace>
            <prefix>au</prefix>
            <uri>urn:x-inspire:specification:gmlas:AdministrativeUnits:3.0</uri>
        </Namespace>
        <Namespace>
            <prefix>gml</prefix>
            <uri>http://www.opengis.net/gml/3.2</uri>
        </Namespace>
        <Namespace>
            <prefix>gmd</prefix>
            <uri>http://www.isotc211.org/2005/gmd</uri>
        </Namespace>
    </namespaces>
    <sourceDataStores>
        <DataStore>
            <id>ign_postgis_datastore</id>
            <parameters>
              <Parameter>
                  <name>namespace</name>
                  <value>urn:x-inspire:specification:gmlas:AdministrativeUnits:3.0</value>
              </Parameter>
              <Parameter>
                  <name>loose bbox</name>
                  <value>true</value>
              </Parameter>
              <Parameter>
                  <name>user</name>
                  <value>ign</value>
              </Parameter>
              <Parameter>
                  <name>passwd</name>
                  <value>ign</value>
              </Parameter>
              <Parameter>
                  <name>wkb enabled</name>
                  <value>true</value>
              </Parameter>
              <Parameter>
                  <name>host</name>
                  <value>localhost</value>
              </Parameter>
              <Parameter>
                  <name>port</name>
                  <value>5432</value>
              </Parameter>
              <Parameter>
                  <name>database</name>
                  <value>ign</value>
              </Parameter>
              <Parameter>
                  <name>dbtype</name>
                  <value>postgisng</value>
              </Parameter>
              <Parameter>
                  <name>Estimated extends</name>
                  <value>true</value>
              </Parameter>
            </parameters>
        </DataStore>
    </sourceDataStores>
    <targetTypes>
        <FeatureType>
            <schemaUri>AdministrativeUnits.xsd</schemaUri>
        </FeatureType>
    </targetTypes>
    <typeMappings>
        <FeatureTypeMapping>
            <sourceDataStore>ign_postgis_datastore</sourceDataStore>
            <sourceType>administrativeunit</sourceType>
            <targetElement>au:AdministrativeUnit</targetElement>
            <groupBy />
            <attributeMappings>
                <AttributeMapping>
                    <targetAttribute>au:AdministrativeUnit</targetAttribute>
                    <idExpression>
                        <OCQL>getId()</OCQL>
                    </idExpression>
                </AttributeMapping>
                <AttributeMapping>
                    <targetAttribute>au:geometry</targetAttribute>
                    <idExpression>
                        <OCQL>strConcat('au_geometry.', getId())</OCQL>
                    </idExpression>
                    <sourceExpression>
                        <OCQL>geometry</OCQL>
                    </sourceExpression>
                </AttributeMapping>
                <AttributeMapping>
                    <targetAttribute>au:nationalCode</targetAttribute>
                    <sourceExpression>
                        <OCQL>nationalcode</OCQL>
                    </sourceExpression>
                </AttributeMapping>
                <AttributeMapping>
                    <targetAttribute>au:inspireId</targetAttribute>
                    <idExpression>
                        <OCQL>inspireid</OCQL>
                    </idExpression>
                </AttributeMapping>
                <AttributeMapping>
                    <targetAttribute>au:nationalLevel</targetAttribute>
                    <sourceExpression>
                        <OCQL>nationallevel</OCQL>
                    </sourceExpression>
                </AttributeMapping>
                <AttributeMapping>
                    <targetAttribute>au:nationalLevelName/gmd:LocalisedCharacterString</targetAttribute>
                    <sourceExpression>
                        <OCQL>nationallevelname</OCQL>
                    </sourceExpression>
                    <ClientProperty>
                        <name>locale</name>
                        <value>'#FR'</value>
                    </ClientProperty> 
                    
                </AttributeMapping>
                <AttributeMapping>
                    <targetAttribute>au:country/gmd:Country</targetAttribute>
                    <sourceExpression>
                        <OCQL>country</OCQL>
                    </sourceExpression>
                    <ClientProperty>
                        <name>codeList</name>
                        <value>'#Country'</value>
                    </ClientProperty> 
<!-- TODO Need a why to calculate the codelistvalue.  a table or external properties files
                    <ClientProperty>
                        <name>codeListValue</name>
                        <OCQL>countrycode</OCQL>
                    </ClientProperty> -->
                </AttributeMapping>
            </attributeMappings>
        </FeatureTypeMapping>
    </typeMappings>
</as:AppSchemaDataAccess>
