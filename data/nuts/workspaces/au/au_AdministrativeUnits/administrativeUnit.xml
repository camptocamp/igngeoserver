<?xml version="1.0" encoding="UTF-8"?>
<as:AppSchemaDataAccess xmlns:as="http://www.geotools.org/app-schema"
	xmlns:ogc="http://www.opengis.net/ogc" xmlns:xs="http://www.w3.org/2001/XMLSchema"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.geotools.org/app-schema AppSchemaDataAccess.xsd">
	<namespaces>
		<Namespace>
			<prefix>au</prefix>
			<uri>urn:x-inspire:specification:gmlas:AdministrativeUnits:3.0</uri>
		</Namespace>
		<Namespace>
			<prefix>gml</prefix>
			<uri>http://www.opengis.net/gml/3.2</uri>
		</Namespace>
		<Namespace>
			<prefix>xlink</prefix>
			<uri>http://www.w3.org/1999/xlink</uri>
		</Namespace>
		<Namespace>
			<prefix>base</prefix>
			<uri>urn:x-inspire:specification:gmlas:BaseTypes:3.2</uri>
		</Namespace>
		<Namespace>
			<prefix>gmd</prefix>
			<uri>http://www.isotc211.org/2005/gmd</uri>
		</Namespace>
		<Namespace>
			<prefix>gn</prefix>
			<uri>urn:x-inspire:specification:gmlas:GeographicalNames:3.0</uri>
		</Namespace>
		<Namespace>
			<prefix>stat</prefix>
			<uri>urn:x-inspire:specification:gmlas:StatisticalUnits:0.0</uri>
		</Namespace>
	</namespaces>
	<sourceDataStores>
		<DataStore>
			<id>ign_postgis_datastore</id>
			<parameters>
				<Parameter>
					<name>namespace</name>
					<value>urn:x-inspire:specification:gmlas:AdministrativeUnits:3.0</value>
				</Parameter>
				<Parameter>
					<name>loose bbox</name>
					<value>true</value>
				</Parameter>
				<Parameter>
					<name>user</name>
					<value>ign</value>
				</Parameter>
				<Parameter>
					<name>passwd</name>
					<value>ign</value>
				</Parameter>
				<Parameter>
					<name>wkb enabled</name>
					<value>true</value>
				</Parameter>
				<Parameter>
					<name>host</name>
					<value>localhost</value>
				</Parameter>
				<Parameter>
					<name>port</name>
					<value>5432</value>
				</Parameter>
				<Parameter>
					<name>database</name>
					<value>ign</value>
				</Parameter>
				<Parameter>
					<name>dbtype</name>
					<value>postgisng</value>
				</Parameter>
				<Parameter>
					<name>Estimated extends</name>
					<value>true</value>
				</Parameter>
				<Parameter>
					<name>Expose primary keys</name>
					<value>true</value>
				</Parameter>
			</parameters>
		</DataStore>
	</sourceDataStores>
	<includedTypes>
		<Include>
			GeographicalName.xml
		</Include>
	</includedTypes>
	<targetTypes>
		<FeatureType>
			<schemaUri>AdministrativeUnits.xsd</schemaUri>
		</FeatureType>
	</targetTypes>
	<typeMappings>
		<FeatureTypeMapping>
			<sourceDataStore>ign_postgis_datastore</sourceDataStore>
			<sourceType>administrativeunit</sourceType>
			<targetElement>au:AdministrativeUnit</targetElement>
			<attributeMappings>
				<AttributeMapping>
					<targetAttribute>au:AdministrativeUnit</targetAttribute>
					<idExpression>
						<OCQL>strTrim(inspireid)</OCQL>
					</idExpression>
				</AttributeMapping>
				<AttributeMapping> <targetAttribute>au:geometry</targetAttribute> 
					<idExpression>
						<OCQL>strConcat('unit_geometry.', strTrim(inspireid))</OCQL> 
					</idExpression> 
					<sourceExpression>
						<OCQL>geometry</OCQL>
					</sourceExpression> 
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>au:nationalCode</targetAttribute>
					<sourceExpression>
						<OCQL>strTrim(nationalcode)</OCQL>
					</sourceExpression>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>au:inspireId/base:Identifier/base:localId</targetAttribute>
					<sourceExpression>
						<OCQL>strTrim(inspireid)</OCQL>
					</sourceExpression>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>au:nationalLevel</targetAttribute>
					<sourceExpression>
						<OCQL>nationallevel</OCQL>
					</sourceExpression>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>au:nationalLevelName/gmd:LocalisedCharacterString</targetAttribute>
					<sourceExpression>
						<OCQL>nationallevelname</OCQL>
					</sourceExpression>
					<ClientProperty>
						<name>locale</name>
						<value>'#FR'</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>au:country/gmd:Country</targetAttribute>
					<sourceExpression>
						<OCQL>country</OCQL>
					</sourceExpression>
					<ClientProperty>
						<name>codeList</name>
						<value>'http://www.isotc211.org/2005/resources/codeList.xml#Country'</value>
					</ClientProperty>
					<ClientProperty>
						<name>codeListValue</name>
						<value>country</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>au:name</targetAttribute>
					<sourceExpression>
						<OCQL>strTrim(name)</OCQL>
						<linkElement>gn:GeographicalName</linkElement>
						<linkField>FEATURE_LINK</linkField>
					</sourceExpression>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>au:residenceOfAuthority</targetAttribute>
					<encodeIfEmpty>true</encodeIfEmpty>
					<ClientProperty>
						<name>xlink:href</name>
						<value>'urn:x-inspire:specification:gmlas:AdministrativeUnits:3.0:missing'</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<encodeIfEmpty>true</encodeIfEmpty>
					<targetAttribute>au:beginLifespanVersion</targetAttribute>
					<sourceExpression>
						<OCQL>beginlifespanversion</OCQL>
					</sourceExpression>
					<encodeIfEmpty>false</encodeIfEmpty>
					<ClientProperty>
						<name>nilReason</name>
						<value>if_then_else(isNull(beginlifespanversion), 'unknown', '')</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<encodeIfEmpty>true</encodeIfEmpty>
					<targetAttribute>au:endLifespanVersion</targetAttribute>
					<sourceExpression>
						<OCQL>endlifespanversion</OCQL>
					</sourceExpression>
					<ClientProperty>
						<name>nilReason</name>
						<value>if_then_else(isNull(endlifespanversion), 'unknown', '')</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>au:NUTS</targetAttribute>
					<encodeIfEmpty>true</encodeIfEmpty>
					<ClientProperty>
						<name>xlink:href</name>
						<value>'urn:x-inspire:specification:gmlas:AdministrativeUnits:3.0:missing'</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>au:condominium</targetAttribute>
					<encodeIfEmpty>true</encodeIfEmpty>
					<ClientProperty>
						<name>xlink:href</name>
						<value>'urn:x-inspire:specification:gmlas:AdministrativeUnits:3.0:missing'</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>au:lowerLevelUnit</targetAttribute>
					<sourceExpression>
						<OCQL>strTrim(inspireid)</OCQL>
						<linkElement>au:AdministrativeUnit</linkElement>
						<linkField>au:upperLevelUnit</linkField>
					</sourceExpression>
					<isMultiple>true</isMultiple>
					<ClientProperty>
						<name>xlink:href</name>
						<value>strConcat('urn:x-inspire:specification:gmlas:AdministrativeUnit:3.0:', strTrim(inspireid))</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>au:upperLevelUnit</targetAttribute>
					<encodeIfEmpty>true</encodeIfEmpty>
					<sourceExpression>
						<OCQL>strTrim(upperlevelunit)</OCQL>
						<linkElement>au:AdministrativeUnit</linkElement>
						<linkField>au:inspireId/base:Identifier/base:localId</linkField>
					</sourceExpression>
					<isMultiple>true</isMultiple>
					<ClientProperty>
						<name>xlink:href</name>
						<value>strConcat('urn:x-inspire:specification:gmlas:AdministrativeUnit:3.0:', strTrim(inspireid))</value>
					</ClientProperty>
					<ClientProperty>
						<name>nilReason</name>
						<value>if_then_else(isNull(inspireid), 'unknown', '')</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>au:administeredBy</targetAttribute>
					<sourceExpression>
						<OCQL>strTrim(administeredby)</OCQL>
						<linkElement>au:AdministrativeUnit</linkElement>
						<linkField>au:inspireId/base:Identifier/base:localId</linkField>
					</sourceExpression>
					<isMultiple>true</isMultiple>
					<ClientProperty>
						<name>xlink:href</name>
						<value>strConcat('urn:x-inspire:specification:gmlas:AdministrativeUnit:3.0:', strTrim(inspireid))</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>au:coAdminister</targetAttribute>
					<sourceExpression>
						<OCQL>strTrim(coadminister)</OCQL>
						<linkElement>au:AdministrativeUnit</linkElement>
						<linkField>au:inspireId/base:Identifier/base:localId</linkField>
					</sourceExpression>
					<isMultiple>true</isMultiple>
					<ClientProperty>
						<name>xlink:href</name>
						<value>strConcat('urn:x-inspire:specification:gmlas:AdministrativeUnit:3.0:', strTrim(inspireid))</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>au:boundary</targetAttribute>
					<sourceExpression>
						<OCQL>strTrim(boundary)</OCQL>
						<linkElement>au:AdministrativeBoundary</linkElement>
						<linkField>au:inspireId/base:Identifier/base:localId</linkField>
					</sourceExpression>
					<isMultiple>true</isMultiple>
					<ClientProperty>
						<name>xlink:href</name>
						<value>strConcat('urn:x-inspire:specification:gmlas:AdministrativeBoundary:3.0:', strTrim(inspireid))</value>
					</ClientProperty>
				</AttributeMapping>
			</attributeMappings>
		</FeatureTypeMapping>
		<FeatureTypeMapping>
			<sourceDataStore>ign_postgis_datastore</sourceDataStore>
			<sourceType>administrativeboundary</sourceType>
			<targetElement>au:AdministrativeBoundary</targetElement>

			<attributeMappings>
				<AttributeMapping>
					<targetAttribute>au:AdministrativeBoundary</targetAttribute>
					<idExpression>
						<OCQL>strTrim(inspireid)</OCQL>
					</idExpression>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>au:geometry</targetAttribute>
					<idExpression>
						<OCQL>strConcat('boundary_geometry.', strTrim(inspireid))</OCQL>
					</idExpression>
					<sourceExpression>
						<OCQL>geometry</OCQL>
					</sourceExpression>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>au:inspireId/base:Identifier/base:localId</targetAttribute>
					<sourceExpression>
						<OCQL>strTrim(inspireid)</OCQL>
					</sourceExpression>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>au:country/gmd:Country</targetAttribute>
					<sourceExpression>
						<OCQL>country</OCQL>
					</sourceExpression>
					<ClientProperty>
						<name>codeList</name>
						<value>'http://www.isotc211.org/2005/resources/codeList.xml#Country'</value>
					</ClientProperty>
					<ClientProperty>
						<name>codeListValue</name>
						<value>country</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>au:nationalLevel</targetAttribute>
					<sourceExpression>
						<OCQL>nationallevel</OCQL>
					</sourceExpression>
				</AttributeMapping>
				<AttributeMapping>
					<encodeIfEmpty>true</encodeIfEmpty>
					<targetAttribute>au:legalStatus</targetAttribute>
					<sourceExpression>
						<OCQL>legalstatus</OCQL>
					</sourceExpression>
					<ClientProperty>
						<name>nilReason</name>
						<value>if_then_else(isNull(legalstatus), 'unknown', '')</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<encodeIfEmpty>true</encodeIfEmpty>
					<targetAttribute>au:technicalStatus</targetAttribute>
					<sourceExpression>
						<OCQL>technicalstatus</OCQL>
					</sourceExpression>
					<ClientProperty>
						<name>nilReason</name>
						<value>if_then_else(isNull(technicalstatus), 'unknown', '')</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<encodeIfEmpty>true</encodeIfEmpty>
					<targetAttribute>au:beginLifespanVersion</targetAttribute>
					<sourceExpression>
						<!-- <OCQL>if_then_else(isNull(beginlifespanversion), 'noDate', beginlifespanversion)</OCQL> -->
						<OCQL>beginlifespanversion</OCQL>
					</sourceExpression>
					<ClientProperty>
						<name>nilReason</name>
						<value>if_then_else(isNull(beginlifespanversion), 'unknown', '')</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<encodeIfEmpty>true</encodeIfEmpty>
					<targetAttribute>au:endLifespanVersion</targetAttribute>
					<sourceExpression>
						<OCQL>endlifespanversion</OCQL>
					</sourceExpression>
					<ClientProperty>
						<name>nilReason</name>
						<value>if_then_else(isNull(endlifespanversion), 'unknown', '')</value>
					</ClientProperty>
				</AttributeMapping>
				<AttributeMapping>
					<targetAttribute>au:admUnit</targetAttribute>
					<sourceExpression>
						<OCQL>strTrim(admunit)</OCQL>
						<linkElement>au:AdministrativeUnit</linkElement>
						<linkField>au:inspireId/base:Identifier/base:localId</linkField>
					</sourceExpression>
					<isMultiple>true</isMultiple>
					<encodeIfEmpty>true</encodeIfEmpty>
					<ClientProperty>
						<name>xlink:href</name>
						<value>strConcat('urn:x-inspire:specification:gmlas:AdministrativeUnits:3.0:', if_then_else(isNull(inspireid),'missing', strTrim(inspireid)))</value>
					</ClientProperty>
				</AttributeMapping>
			</attributeMappings>
		</FeatureTypeMapping>
	</typeMappings>
</as:AppSchemaDataAccess>
